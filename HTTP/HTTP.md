# HTTP1.0/1.1/2.0

**HTTP1.0**
浏览器与服务器只保持短暂的连接，浏览器的每次请求都需要与服务器建立一个TCP连接  

**HTTP1.1**
1. 引入**长连接**，即TCP连接默认不关闭（Connection: keep-alive），可以被多个请求复用  
2. 在同一个TCP连接里面，客户端可以同时发送多个请求  
3. 虽然允许复用TCP连接，但是同一个TCP连接里面，所有的数据通信是按次序进行的，服务器只有处理完一个请求，才会接着处理下一4个请求。如果前面的处理特别慢，后面就会有许多请求排队等着  
4. 新增了一些请求方法（put、delete、options）  
5. 新增了一些请求头和响应头  
    1. 引入了更多的缓存控制策略，如If-Unmodified-Since, If-Match, If-None-Match等缓存头来控制缓存策略
    2. 引入range，允许值请求资源某个部分
    3. 引入host，实现了在一台WEB服务器上可以在同一个IP地址和端口号上使用不同的主机名来创建多个虚拟WEB站点  

**HTTP2.0**
1. 多路复用  
HTTP/2 复用TCP连接，在一个连接里，客户端和浏览器都可以同时发送多个请求或回应，而且不用按照顺序一一对应，这样就避免了”队头堵塞”
2. 二进制分帧
HTTP/2 协议中，所有传输的数据被分割成更小的帧（Frames），并以二进制格式传输，而非文本格式（http/1）  
3. 首部压缩
HTTP/2 中的首部压缩是指对传输的 HTTP 报头压缩，以减少数据传输量，提高传输效率，降低开销。 
4. 服务器推送
HTTP/2 引入服务器推送，允许服务端推送资源给客户端，服务器会顺便把一些客户端需要的资源一起推送到客户端，如在响应一个页面请求中，就可以随同页面的其它资源，免得客户端再次创建连接发送请求到服务器端获取  


# 扩展

## 为什么可以多路复用
多路复用是指在同一条连接上同时进行多个数据流的传输。HTTP/1.1使用的是持久连接，但它是串行的，每个请求需要等前一个请求完成才能发送下一个请求。而HTTP/2引入了多路复用，使得多个请求和响应可以同时在同一条连接上传输。

**实现原理**

1. 帧和流： HTTP/2将数据分割成一系列的帧，每个帧承载着特定类型的数据，例如头部数据、请求体等。多个帧组成一个流，每个流都有唯一的标识符。
2. 二进制分帧： 数据在传输前被切割成小的二进制帧，每个帧都是独立的。
3. 流的独立性： 每个流都是独立的通信信道，流之间互不影响。
4. 并发发送： 多个流可以并发地在同一条连接上传输，而不会阻塞其他流的进行。

由于多路复用，HTTP/2在同一连接上可以同时进行多个请求和响应，提高了性能，减少了延迟。这种并发性能的提升是通过在同一连接上使用多个流实现的。这在传输大量小资源或者大量的小请求时特别有效，可以充分利用带宽，提高页面加载速度。