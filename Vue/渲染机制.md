# Vue的渲染机制
1. 模板编译： 在开始渲染之前，Vue 需要先将模板编译成渲染函数。模板编译过程中，Vue 会解析模板字符串，生成一个 AST（抽象语法树），然后通过遍历 AST 生成对应的渲染函数。

2. 创建虚拟 DOM： 在组件实例化过程中，Vue 会调用渲染函数生成虚拟 DOM（VNode）。虚拟 DOM 是一个用 JavaScript 对象表示的树状结构，它对应着模板中的元素和组件。

3. 首次渲染： 将生成的虚拟 DOM 渲染到实际的 DOM 上。这个过程发生在页面初始化阶段，或者在组件被动态创建时。Vue 会递归遍历虚拟 DOM，根据节点类型创建对应的真实 DOM 元素，并将其插入到页面中。

4. 数据响应式建立关联： 在首次渲染时，Vue 会建立起数据与虚拟 DOM 的关联关系。这是通过在数据的 getter 函数中收集依赖（Watcher）的方式实现的。当数据被访问时，Vue 会记录下访问该数据的 Watcher，当数据发生变化时，会通知相关的 Watcher 进行更新。

5. 更新视图： 当数据发生变化时，Vue 会触发重新渲染过程。这时，Vue 会生成新的虚拟 DOM 树，然后通过对比新旧虚拟 DOM 树找出变化的部分，最终更新实际的 DOM。这个过程是通过 Vue 的更新机制来完成的，可以最小化实际 DOM 操作的次数，提高性能。

6. 异步更新队列： 为了提高性能，Vue 引入了异步更新队列的概念。在一次事件循环中，Vue 会将所有数据变化所引起的视图更新缓冲到队列中，然后在下一个事件循环中批量执行这些更新，以减少重复计算和提高性能。